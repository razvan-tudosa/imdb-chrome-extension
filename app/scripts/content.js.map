{"version":3,"sources":["../scripts.babel/content.js"],"names":[],"mappings":"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","file":"content.js","sourcesContent":["console.log('Mighty content js speaks to us... blaaa!');\n\nconst api = {\n  card: {\n    domRef: null,\n    content: {}\n  },\n  handlers: {\n    mouseOver: (e) => {\n      let link = e.target.parentNode.href;\n      let imdbId = link.match(/nm[0-9]*/g)[0];\n\n      const position = {\n        top: e.pageY - 200 - 15 + 'px',\n        left: e.pageX + 'px'\n      };\n\n      api.showCard(position);\n\n      api.getActorData(imdbId)\n        .then((response) => {\n          //populate card\n          api.populateCard(response.data);\n        });\n    },\n    mouseOut: () => {\n      api.hideCard();\n    }\n  },\n  createCard: () => {\n    api.card.domRef = document.createElement('div');\n    api.card.domRef.classList.add('helper-card');\n    api.card.content.image = document.createElement('img');\n    api.card.domRef.appendChild(api.card.content.image);\n    document.querySelector('body').appendChild(api.card.domRef);\n  },\n  getActorData: (imdbId) => {\n    var url = `http://imdb.wemakesites.net/api/${imdbId}`;\n\n    return fetch(url, { method: 'GET' })\n      .then((response) => {\n        return response.json();\n      });\n  },\n  populateCard: (actorInfo) => {\n    api.card.content.image.src = actorInfo.image;\n  },\n  showCard: (position) => {\n    api.card.domRef.classList.add('show');\n    api.card.domRef.style.top = position.top;\n    api.card.domRef.style.left = position.left;\n  },\n  hideCard: () => {\n    api.card.domRef.classList.remove('show');\n    api.card.content.image.src = '';\n  },\n  _attachEventHandlers: () => {\n    var actorsDomElements = document.querySelectorAll('.cast_list .itemprop a');\n\n    const THROTTLE_TIME = 500;\n\n    [].forEach.call(actorsDomElements, function(actor) {\n      actor.addEventListener('mouseover', _.throttle(api.handlers.mouseOver, THROTTLE_TIME));\n      actor.addEventListener('mouseout', _.throttle(api.handlers.mouseOut, THROTTLE_TIME));\n    });\n  },\n  init: () => {\n    api.createCard();\n    api._attachEventHandlers();\n  }\n};\n\napi.init();\n"]}